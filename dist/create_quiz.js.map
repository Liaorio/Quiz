{"version":3,"sources":["../create_quiz.js"],"names":["$","window","document","undefined","createQuiz","ele","json","$json","$element","prototype","htmlElementJoint","quizJson","content","questions","number","length","hasImage","quizImageControl","quizHtml","title","description","each","key","val","isShown1","options1","isShown2","options2","isShown3","options3","isShown4","options4","img","question","item","dataset","quiz","JSON","stringify","append","outerHTML","addQuizFunction","slick","dots","adaptiveHeight","draggable","nextArrow","score","change","e","option_input","target","option_input_id","getAttribute","option_li","parentNode","option_li_id","addClass","question_id","question_answered","split","option_choose","data","parse","result","rightAnswer","feedback","explanation","html","removeClass","click","restart","attr","fn","myQuiz","jQuery"],"mappings":"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","file":"create_quiz.js","sourcesContent":["/**\n * Created by liao on 2017/6/9.\n */\n\n;(function ($, window, document, undefined) {\n\n    var createQuiz = function (ele, json) {\n        this.$json = json,\n            this.$element = ele\n    }\n\n    createQuiz.prototype = {\n\n        htmlElementJoint: function () {\n            var quizJson = this.$json;\n            var content = quizJson.content;\n            var questions = content.questions;\n            var number = questions.length;\n            var hasImage = content.quizImageControl ? '' : 'hide';\n            var quizHtml = '';\n\n            quizHtml = '<div class=\"cmsQuiz\"><div class=\"quiz-container-inner\"><div class=\"quiz-title\"><div class=\"quiz-main-title\">' + content.title + '</div><div class=\"quiz-sub-title\">' + content.description + '</div></div>' + '<div class=\"slick-part\">';\n\n            $.each(questions, function (key, val) {\n                var isShown1 = val.options1 == \"\" ? 'invisible' : '',\n                    isShown2 = val.options2 == \"\" ? 'invisible' : '',\n                    isShown3 = val.options3 == \"\" ? 'invisible' : '',\n                    isShown4 = val.options4 == \"\" ? 'invisible' : '';\n\n                quizHtml += \"<div class='slick-item' id='slick-item-\" + key + \"'>\" +\n                    \"<div class='quiz-image \" + hasImage + \"'>\" +\n                    \"<img src='\" + val.img + \"'>\" +\n                    \"</div>\" +\n                    \"<div class='quiz-question' id='slick-item-question-\" + key + \" '>\" +\n                    \"<div class='quiz-question-num-container'>\" +\n                    \"<div class='quiz-question-num'>\" + (key + 1) + \"</div>\" +\n                    \"</div>\" +\n                    \"<div class='quiz-question-text'>\" +\n                    val.question +\n                    \"</div>\" +\n                    \"<div class='quiz-question-options'>\" +\n                    \"<ul class='quiz-question-options-ul' id='question_\" + key + \"'>\" +\n                    \"<li class='quiz-question-options-li \" + isShown1 + \"' id='question_\" + key + \"_1_li'>\" +\n                    \"<input type='radio' class='magic-radio' name='question_\" + key + \"' id='question_\" + key + \"_1_option'>\" + \"<label class='option-text' for='question_\" + key + \"_1_option'>\" + val.options1 + \"</label>\" +\n                    \"</li>\" +\n                    \"<li class='quiz-question-options-li \" + isShown2 + \"' id='question_\" + key + \"_2_li'>\" +\n                    \"<input type='radio' class='magic-radio' name='question_\" + key + \"' id='question_\" + key + \"_2_option'>\" + \"<label class='option-text' for='question_\" + key + \"_2_option'>\" + val.options2 + \"</label>\" +\n                    \"</li>\" +\n                    \"<li class='quiz-question-options-li \" + isShown3 + \"' id='question_\" + key + \"_3_li'>\" +\n                    \"<input type='radio' class='magic-radio' name='question_\" + key + \"' id='question_\" + key + \"_3_option'>\" + \"<label class='option-text' for='question_\" + key + \"_3_option'>\" + val.options3 + \"</label>\" +\n                    \"</li>\" +\n                    \"<li class='quiz-question-options-li \" + isShown4 + \"' id='question_\" + key + \"_4_li'>\" +\n                    \"<input type='radio' class='magic-radio' name='question_\" + key + \"' id='question_\" + key + \"_4_option'>\" + \"<label class='option-text' for='question_\" + key + \"_4_option'>\" + val.options4 + \"</label>\" +\n                    \"</li>\" +\n                    \"</ul>\" + \"</div>\" +\n                    \"<div class='quiz-process'>\" + (key + 1) + \"/\" + number + \"</div>\" +\n                    \"</div>\" +\n                    \"<div class='nextButton onlyNext invisible' id='next_\" + key + \"'>\" + \"Next\" + \"</div>\" +\n                    \"</div>\";\n            });\n\n            quizHtml += \"<div class='slick-item'>\" +\n                \"<div class='score-div'>\" +\n                \"<h1>\" + \"Your Score\" + \"</h1>\" +\n                \"<div class='score-part'>\" +\n                \"<span class='score' id='final-score'>\" + 0 + \"</span>\" + \"&nbsp;&nbsp;/&nbsp;&nbsp;\" + \"<span class='score'>\" + number + \"</span>\" +\n                \"</div>\" +\n                \"<h1>\" + \"Let your friends and the word know\" + \"</h1>\" +\n                \"<div class='icon-list'>\" +\n                \"<div class='share'>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/mail@3x.png'></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/facebook@3x.png'/></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/wechat@3x.png'/></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/weibo@3x.png'/></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/twitter@3x.png'/></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/tumblr@3x.png'/></a>\" +\n                \"</div>\" +\n                \"</div>\" +\n                \"</div>\" +\n                \"<div class='restartButton nextButton' data-restart='true'>\" + \"Start it again\" + \"</div>\" +\n                \"</div>\";\n\n            quizHtml += '</div><div class=\"quiz-result\"></div></div></div>';\n\n            var item = $(quizHtml);\n            item[0].dataset.quiz = JSON.stringify(quizJson);\n            return this.$element.append(item[0].outerHTML);\n        },\n\n        addQuizFunction: function () {\n            this.htmlElementJoint();\n\n            //Slick\n            $('.slick-part').slick({\n                dots: false,\n                adaptiveHeight: true,\n                draggable: false,\n                nextArrow: $('.nextButton'),\n            });\n\n            //Do Quiz\n            var score = 0;\n            $('input[type=\"radio\"]').change(function (e) {\n\n                //input选中\n                var option_input = e.target;\n                var option_input_id = option_input.getAttribute(\"id\");\n\n                //li背景颜色改变\n                var option_li = e.target.parentNode;\n                var option_li_id = option_li.getAttribute('id');\n                $('#' + option_li_id).addClass('option-chosen');\n\n                //ul不能被点击\n                var question_id = option_input.getAttribute(\"name\");\n                $(\"#\" + question_id).addClass('no-click');\n\n                //答案显示\n                var question_answered = option_input_id.split('_')[1];\n                var option_choose = option_input_id.split('_')[2];\n                var data = JSON.parse($('.cmsQuiz')[0].dataset.quiz);\n                var question = data.content.questions[question_answered];\n                var result = option_choose == question.rightAnswer ? 'Correct' : 'Wrong';\n                var feedback = question.explanation;\n                $('.quiz-result').html(\n                    \"<div class='quiz-result-title'>\" + result + \"!\" + \"</div>\" +\n                    \"<div class='quiz-result-text'>\" + feedback + \"</div>\"\n                );\n\n                //得分加一\n                if (result == 'Correct') {\n                    score++;\n                }\n\n                //nextButton显示\n                $(\"#next_\" + question_answered).removeClass('invisible');\n\n                //分数显示\n                $(\"#final-score\").html(score);\n\n            });\n\n            //题目刷新\n            $('.nextButton').click(function (e) {\n                $('.quiz-result').html('');\n\n                if ($(e.target)[0].dataset.restart) {\n                    score = 0;\n                    $('input[type=\"radio\"]').attr('checked', false);\n                    $('.quiz-question-options-ul').removeClass('no-click');\n                    $('.quiz-question-options-li').removeClass('option-chosen');\n                    $(\".onlyNext\").addClass('invisible');\n                }\n            });\n        }\n    }\n\n\n    $.fn.createQuiz = function (json) {\n        var myQuiz = new createQuiz(this, json);\n\n        return myQuiz.addQuizFunction();\n    }\n\n})(jQuery, window, document);"]}