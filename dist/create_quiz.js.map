{"version":3,"sources":["../create_quiz.js"],"names":["$","window","document","undefined","createQuiz","ele","json","$json","$element","prototype","htmlElementJoint","quizJson","content","questions","number","length","hasImage","quizImageControl","quizHtml","title","description","each","key","val","isShown1","options1","isShown2","options2","isShown3","options3","isShown4","options4","noImgClass","img","question","item","dataset","quiz","JSON","stringify","append","outerHTML","addQuizFunction","score","change","e","option_input","target","option_input_id","getAttribute","option_li","parentNode","option_li_id","addClass","question_id","question_answered","split","option_choose","data","parse","result","rightAnswer","resultclass","feedback","explanation","html","fadeIn","removeClass","quizItem","quizLength","eq","i","theWrap","find","click","hide","restart","attr","fn","myQuiz","jQuery"],"mappings":"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","file":"create_quiz.js","sourcesContent":["/**\n * Created by liao on 2017/6/9.\n */\n\n;(function ($, window, document, undefined) {\n\n    var createQuiz = function (ele, json) {\n        this.$json = json,\n            this.$element = ele\n    }\n\n    createQuiz.prototype = {\n\n        htmlElementJoint: function () {\n            var quizJson = this.$json;\n            var content = quizJson.content;\n            var questions = content.questions;\n            var number = questions.length;\n            var hasImage = content.quizImageControl ? '' : 'hide';\n\n\n            var quizHtml = '';\n\n            quizHtml = '<div class=\"cmsQuiz\"><div class=\"quiz-container-inner\"><div class=\"quiz-title\"><div class=\"quiz-main-title\">' + content.title + '</div><div class=\"quiz-sub-title\">' + content.description + '</div></div>' + '<div class=\"slick-part\">';\n\n            $.each(questions, function (key, val) {\n\n                var isShown1 = val.options1 == \"\" ? 'invisible' : '',\n                    isShown2 = val.options2 == \"\" ? 'invisible' : '',\n                    isShown3 = val.options3 == \"\" ? 'invisible' : '',\n                    isShown4 = val.options4 == \"\" ? 'invisible' : '';\n\n                var noImgClass = '';\n                if(!val.img) {\n                    noImgClass = 'js-noimg';\n                }\n                //题目页面\n                quizHtml += \"<div class='slick-item'>\" +\n                    \"<div class='quiz-image \" + hasImage + \"'>\" +\n                    \"<img class='\"+ noImgClass +\"' src='\" + val.img + \"' />\" +\n                    \"</div>\" +\n                    \"<div class='quiz-question'>\" +\n                    \"<div class='quiz-question-num-container'>\" +\n                    \"<div class='quiz-question-num'>\" + (key + 1) + \"</div>\" +\n                    \"</div>\" +\n                    \"<div class='quiz-question-text'>\" +\n                    val.question +\n                    \"</div>\" +\n                    \"<div class='quiz-question-options'>\" +\n                    \"<ul class='quiz-question-options-ul' id='question_\" + key + \"'>\" +\n\n                    \"<li class='quiz-question-options-li \" + isShown1 + \"' id='question_\" + key + \"_1_li'>\" +\n                    \"<input type='radio' class='magic-radio' name='question_\" + key + \"' id='question_\" + key + \"_1_option'>\" + \"<label class='option-text' for='question_\" + key + \"_1_option'>\" + val.options1 + \"</label>\" +\n                    \"</li>\" +\n\n                    \"<li class='quiz-question-options-li \" + isShown2 + \"' id='question_\" + key + \"_2_li'>\" +\n                    \"<input type='radio' class='magic-radio' name='question_\" + key + \"' id='question_\" + key + \"_2_option'>\" + \"<label class='option-text' for='question_\" + key + \"_2_option'>\" + val.options2 + \"</label>\" +\n                    \"</li>\" +\n\n\n                    \"<li class='quiz-question-options-li \" + isShown3 + \"' id='question_\" + key + \"_3_li'>\" +\n                    \"<input type='radio' class='magic-radio' name='question_\" + key + \"' id='question_\" + key + \"_3_option'>\" + \"<label class='option-text' for='question_\" + key + \"_3_option'>\" + val.options3 + \"</label>\" +\n                    \"</li>\" +\n\n                    \"<li class='quiz-question-options-li \" + isShown4 + \"' id='question_\" + key + \"_4_li'>\" +\n                    \"<input type='radio' class='magic-radio' name='question_\" + key + \"' id='question_\" + key + \"_4_option'>\" + \"<label class='option-text' for='question_\" + key + \"_4_option'>\" + val.options4 + \"</label>\" +\n                    \"</li>\" +\n\n                    \"</ul>\" + \"</div>\" +\n\n                    \"<div class='quiz-process'>\" + (key + 1) + \"/\" + number + \"</div>\" +\n                    \"<div class='nextButton onlyNext invisible' id='next_\" + key + \"'>\" + \"Next\" + \"</div>\" +\n                    \"</div>\" +\n                    \"</div>\";\n            });\n\n            quizHtml += \"<div class='slick-item'>\" +\n                \"<div class='score-div'>\" +\n                \"<h1>\" + \"Your Score\" + \"</h1>\" +\n                \"<div class='score-part'>\" +\n                \"<span class='score' id='final-score'>\" + 0 + \"</span>\" + \"&nbsp;&nbsp;/&nbsp;&nbsp;\" + \"<span class='score'>\" + number + \"</span>\" +\n                \"</div>\" +\n                \"<h1>\" + \"Let your friends and the word know\" + \"</h1>\" +\n                \"<div class='icon-list'>\" +\n                \"<div class='share'>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/facebook@3x.png'></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/twitter@3x.png'/></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/tumblr@3x.png'/></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/wechat@3x.png'/></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/weibo@3x.png'/></a>\" +\n                \"<a class='mail' href='#' target='_blank'><img src='./asset/mail@3x.png'/></a>\" +\n                \"</div>\" +\n                \"</div>\" +\n                \"</div>\" +\n                \"<div class='restartButton nextButton' data-restart='true'>\" + \"Start it again\" + \"</div>\" +\n                \"</div>\";\n\n            quizHtml += '</div><div class=\"quiz-result\">';\n\n\n            quizHtml += '' + '</div></div></div>';\n\n            var item = $(quizHtml);\n\n            item[0].dataset.quiz = JSON.stringify(quizJson);\n\n            return this.$element.append(item[0].outerHTML);\n        },\n\n        addQuizFunction: function () {\n            this.htmlElementJoint();\n\n            //Slick\n            // $('.slick-part').slick({\n            //     dots: false,\n            //     adaptiveHeight: true,\n            //     draggable: false,\n            //     nextArrow: $('.nextButton'),\n            // });\n\n            //Do Quiz\n            var score = 0;\n\n            $('input[type=\"radio\"]').change(function (e) {\n\n                //input选中\n                var option_input = e.target;\n                var option_input_id = option_input.getAttribute(\"id\");\n\n                //li背景颜色改变\n                var option_li = e.target.parentNode;\n                var option_li_id = option_li.getAttribute('id');\n                $('#' + option_li_id).addClass('option-chosen');\n\n                //ul不能被点击\n                var question_id = option_input.getAttribute(\"name\");\n                $(\"#\" + question_id).addClass('no-click');\n\n                //答案显示\n                var question_answered = option_input_id.split('_')[1];\n                var option_choose = option_input_id.split('_')[2];\n                var data = JSON.parse($('.cmsQuiz')[0].dataset.quiz);\n                var question = data.content.questions[question_answered];\n                var result = option_choose == question.rightAnswer ? 'Correct' : 'Wrong';\n                var resultclass = option_choose == question.rightAnswer ? 'js-correct' : 'js-wrong';\n                var feedback = question.explanation;\n                $('.quiz-result').html(\n                    \"<div class='quiz-result-title \"+ resultclass +\"'>\" + result + \"!\" + \"</div>\" +\n                    \"<div class='quiz-result-text'>\" + feedback + \"</div>\"\n                ).fadeIn(200);\n\n                //得分加一\n                if (result == 'Correct') {\n                    score++;\n                }\n\n                //nextButton显示\n                $(\"#next_\" + question_answered).removeClass('invisible');\n\n                //分数显示\n                $(\"#final-score\").html(score);\n\n            });\n\n            //切换效果\n            var quizItem = $('.quiz-container-inner .slick-part .slick-item');\n            var quizLength = quizItem.length;\n            quizItem.eq(0).fadeIn(200);\n            quizItem.each(function(i) {\n                var theWrap = $(this);\n                $(this).find('.nextButton').click(function() {\n                    theWrap.hide();\n                    if(i==(quizLength-1)) {\n                        quizItem.eq(0).fadeIn(200);\n                    } else {\n                        quizItem.eq(i+1).fadeIn(200);\n                    }\n                })\n            })\n\n            //题目刷新\n            $('.nextButton').click(function (e) {\n                $('.quiz-result').html('').hide();\n\n                if ($(e.target)[0].dataset.restart) {\n                    score = 0;\n                    $('input[type=\"radio\"]').attr('checked', false);\n                    $('.quiz-question-options-ul').removeClass('no-click');\n                    $('.quiz-question-options-li').removeClass('option-chosen');\n\n                    $(\".onlyNext\").addClass('invisible');\n                }\n\n            });\n        }\n    }\n\n\n    $.fn.createQuiz = function (json) {\n        var myQuiz = new createQuiz(this, json);\n\n        return myQuiz.addQuizFunction();\n    }\n\n})(jQuery, window, document);"]}